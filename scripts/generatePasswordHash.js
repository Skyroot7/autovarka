/**
 * Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ…ĞµÑˆĞ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
 * Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: node scripts/generatePasswordHash.js Ğ²Ğ°Ñˆ_Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
 */

const crypto = require('crypto');

function generatePasswordHash(password) {
  // Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ ÑĞ¾Ğ»ÑŒ
  const salt = crypto.randomBytes(32).toString('hex');
  
  // Ğ¥ĞµÑˆĞ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Ñ ÑĞ¾Ğ»ÑŒÑ
  const hash = crypto.pbkdf2Sync(password, salt, 100000, 64, 'sha512').toString('hex');
  
  return { hash, salt };
}

// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Ğ¸Ğ· Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¸
const password = process.argv[2];

if (!password) {
  console.error('\nâŒ ĞÑˆĞ¸Ğ±ĞºĞ°: ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ');
  console.log('\nğŸ“ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:');
  console.log('   node scripts/generatePasswordHash.js Ğ²Ğ°Ñˆ_Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ\n');
  console.log('ğŸ“‹ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:');
  console.log('   node scripts/generatePasswordHash.js MySecurePassword123!\n');
  process.exit(1);
}

console.log('\nğŸ” Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ…ĞµÑˆĞ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ...\n');

const { hash, salt } = generatePasswordHash(password);

console.log('âœ… Ğ¥ĞµÑˆ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½!\n');
console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
console.log('\nğŸ“‹ Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ ÑÑ‚Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ² Ğ²Ğ°Ñˆ .env.local Ñ„Ğ°Ğ¹Ğ»:\n');
console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n');
console.log('# Ğ£Ñ‡ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°');
console.log('ADMIN_USERNAME=admin');
console.log(`ADMIN_PASSWORD_HASH=${hash}`);
console.log(`ADMIN_PASSWORD_SALT=${salt}\n`);
console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n');
console.log('âš ï¸  Ğ’ĞĞ–ĞĞ:');
console.log('   1. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑÑ‚Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ² .env.local');
console.log('   2. ĞĞ° Vercel Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¸Ñ… Ğ² Environment Variables');
console.log('   3. ĞŸĞ¾ÑĞ»Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ADMIN_PASSWORD');
console.log('   4. ĞĞ• ĞºĞ¾Ğ¼Ğ¸Ñ‚ÑŒÑ‚Ğµ .env.local Ğ² git!\n');
console.log('ğŸ”’ Ğ”Ğ»Ñ Vercel:');
console.log('   Settings â†’ Environment Variables â†’ Add New\n');
